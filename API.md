<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Granny][1]
    -   [Parameters][2]
    -   [setOptions][3]
        -   [Parameters][4]
    -   [setAccessToken][5]
        -   [Parameters][6]
    -   [setDomain][7]
        -   [Parameters][8]
    -   [getStatus][9]
        -   [Examples][10]
    -   [setup][11]
        -   [Parameters][12]
        -   [Examples][13]
    -   [login][14]
        -   [Parameters][15]
        -   [Examples][16]
    -   [addDomain][17]
        -   [Parameters][18]
        -   [Examples][19]
    -   [editDomain][20]
        -   [Parameters][21]
        -   [Examples][22]
    -   [getDomain][23]
        -   [Parameters][24]
        -   [Examples][25]
    -   [listDomains][26]
        -   [Examples][27]
    -   [uploadImage][28]
        -   [Parameters][29]
        -   [Examples][30]
    -   [listDirectory][31]
        -   [Parameters][32]
        -   [Examples][33]
    -   [listUsers][34]
        -   [Examples][35]
    -   [addUser][36]
        -   [Parameters][37]
        -   [Examples][38]
    -   [getUser][39]
        -   [Parameters][40]
        -   [Examples][41]
    -   [editUser][42]
        -   [Parameters][43]
        -   [Examples][44]

## Granny

A Granny API contructor

### Parameters

-   `options` **[Object][45]** Setup object (optional, default `{}`)
    -   `options.accessToken` **[string][46]** Login acces token to use for managment API
    -   `options.domain` **[string][46]** Granny server domain to send API request to
    -   `options.accessKey` **[string][46]** Granny server domain accessKey
    -   `options.accessSecret` **[string][46]** Granny server domain accessSecret

### setOptions

Update domain specific options

#### Parameters

-   `options` **[Object][45]** Setup object
    -   `options.domain` **[string][46]** Granny server domain to send API request to
    -   `options.accessKey` **[string][46]** Granny server domain accessKey
    -   `options.accessSecret` **[string][46]** Granny server domain accessSecret

### setAccessToken

Update login access token

#### Parameters

-   `token` **[string][46]** Login acces token to use for managment API

### setDomain

Update domain to send API to

#### Parameters

-   `domain` **[string][46]** 

### getStatus

Open API | Get server/client status

#### Examples

```javascript
var [err, result] = await api.getStatus()
```

Returns **[Promise][47]** [Error, Result]

### setup

Auth API | Setup server with your credentials when first launched

#### Parameters

-   `credentials` **[Object][45]** credentials object
    -   `credentials.login` **[String][46]** 
    -   `credentials.password` **[String][46]** 

#### Examples

```javascript
var [err, result] = await api.setup({ login: 'login', password: 'password' })
```

Returns **[Promise][47]** [Error, Result]

### login

Auth API | Login and get your access token

#### Parameters

-   `credentials` **[Object][45]** credentials object
    -   `credentials.login` **[String][46]** 
    -   `credentials.password` **[String][46]** 

#### Examples

```javascript
var [err, result] = await api.login({ login: 'login', password: 'password' })
```

Returns **[Promise][47]** [Error, Result]

### addDomain

Domain API | Add new domain to serve your files

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.domain` **[String][46]** full domain name

#### Examples

```javascript
var [err, result] = await api.addDomain({ domain: 'cdn.example.com' })
```

Returns **[Promise][47]** [Error, Result]

### editDomain

Domain API | Edit domain

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.domain` **[String][46]** domain to edit
    -   `options.referer` **[Array][48]** list of strings to allow referer request. \* - any, **allow_direct** - direct request, 'string' any string or regex to match referer (optional, default `false`)
    -   `options.ttl` **[Array][48]** time in hours to cache modified image, 0 - do not cache modified image (optional, default `false`)
    -   `options.users` **[Array][48]** list of users belongs to domain (optional, default `false`)

#### Examples

```javascript
//mywebsite.com will match any url containing this string, so subdomains too
var [err, changed] = await api.editUser({domain: 'cdn.example.com', users: ['5e35ce81cd91107c2ca1ab64'], referer: ['mywebsite.com', '__allow_direct__']})
```

Returns **[Promise][47]** [Error, Result]

### getDomain

Domain API | Get all domain information

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.domain` **[String][46]** full domain name

#### Examples

```javascript
var [err, result] = await api.getDomain({ domain: 'cdn.example.com' })
```

Returns **[Promise][47]** [Error, Result]

### listDomains

Domain API | Get all domains

#### Examples

```javascript
var [err, result] = await api.listDomains()
```

Returns **[Promise][47]** [Error, Result]

### uploadImage

Image API | Upload image

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.path` **[String][46]** relative path for the image you want it will be avialable
    -   `options.image` **File** image

#### Examples

```javascript
var [err, result] = await api.uploadImage({ path: '/avatars/user_1.jpg', image: new Buffer(...) })
```

Returns **[Promise][47]** [Error, Result]

### listDirectory

Directory API | Get listing for given path

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.path` **[String][46]** relative path for getting content

#### Examples

```javascript
var [err, result] = await api.listDirectory({ path: '/avatars/' })
```

Returns **[Promise][47]** [Error, Result]

### listUsers

User API [admin_only] | Get all users

#### Examples

```javascript
var [err, users] = await api.listUsers()
```

Returns **[Promise][47]** [Error, Result]

### addUser

User API [admin_only] | Add new users

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.login` **[String][46]** user login
    -   `options.password` **[String][46]** user password
    -   `options.role` **[String][46]** user role [admin|client], default client (optional, default `'client'`)

#### Examples

```javascript
var [err, login] = await api.addUser({lodin: 'sampleuser', password: 'samplepassword'})
```

Returns **[Promise][47]** [Error, Result]

### getUser

User API [admin_only] | Get user information

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.login` **[String][46]** user login

#### Examples

```javascript
var [err, user] = await api.getUser({ login: 'sampleuser' })
```

Returns **[Promise][47]** [Error, Result]

### editUser

User API [admin_only] | Edit user

#### Parameters

-   `options` **[Object][45]** options object
    -   `options.login` **[String][46]** login of user to edit
    -   `options.password` **[String][46]** new user password (optional, default `false`)
    -   `options.role` **[String][46]** new user role [admin|client] (optional, default `false`)
    -   `options.domains` **[Array][48]** list of domains belongs to user (optional, default `false`)

#### Examples

```javascript
var [err, changed] = await api.editUser({lodin: 'sampleuser', domains: ['5e35ce81cd91107c2ca1ab64'], role: 'client'})
```

Returns **[Promise][47]** [Error, Result]

[1]: #granny

[2]: #parameters

[3]: #setoptions

[4]: #parameters-1

[5]: #setaccesstoken

[6]: #parameters-2

[7]: #setdomain

[8]: #parameters-3

[9]: #getstatus

[10]: #examples

[11]: #setup

[12]: #parameters-4

[13]: #examples-1

[14]: #login

[15]: #parameters-5

[16]: #examples-2

[17]: #adddomain

[18]: #parameters-6

[19]: #examples-3

[20]: #editdomain

[21]: #parameters-7

[22]: #examples-4

[23]: #getdomain

[24]: #parameters-8

[25]: #examples-5

[26]: #listdomains

[27]: #examples-6

[28]: #uploadimage

[29]: #parameters-9

[30]: #examples-7

[31]: #listdirectory

[32]: #parameters-10

[33]: #examples-8

[34]: #listusers

[35]: #examples-9

[36]: #adduser

[37]: #parameters-11

[38]: #examples-10

[39]: #getuser

[40]: #parameters-12

[41]: #examples-11

[42]: #edituser

[43]: #parameters-13

[44]: #examples-12

[45]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[46]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[47]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[48]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array
